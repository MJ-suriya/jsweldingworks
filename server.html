<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PrimeTechPicks</title>
    <style>
        .product {
            border: 1px solid #ddd;
            padding: 10px;
            margin: 10px;
            text-align: center;
        }
        .product img {
            max-width: 100%;
        }
    </style>
</head>
<body>
    <input type="text" id="search-input" placeholder="Search for products">
    <button onclick="searchProducts()">Search</button>
    <div id="product-container"></div>
    <script>
        async function searchProducts() {
            const keywords = document.getElementById('search-input').value;
            const accessKeyId = 'AKIAJJGBCWDT4JHRUKGQ';
            const secretAccessKey = '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';
            const associateTag = 'jeysuriya-21';
            const region = 'India';

            const endpoint = 'https://webservices.amazon.com/paapi5/searchitems';
            const payload = {
                PartnerTag: associateTag,
                PartnerType: 'Associates',
                Marketplace: 'www.amazon.com',
                Keywords: 'laptop',
                ItemCount: 10
            };

            const headers = new Headers();
            headers.append('Content-Type', 'application/json');
            headers.append('X-Amz-Date', new Date().toISOString());
            headers.append('Authorization', `AWS4-HMAC-SHA256 Credential=${accessKeyId}/${getDate()}/us-east-1/execute-api/aws4_request, SignedHeaders=content-type;host;x-amz-date, Signature=${generateSignature(payload, secretAccessKey)}`);

            try {
                const response = await fetch(endpoint, {
                    method: 'POST',
                    headers: headers,
                    body: JSON.stringify(payload)
                });
                const data = await response.json();
                displayProducts(data);
            } catch (error) {
                console.error('Error fetching products:', error);
            }
        }

        function getDate() {
            const now = new Date();
            return now.toISOString().split('T')[0].replace(/-/g, '');
        }

        function generateSignature(payload, secretAccessKey) {
            // Placeholder for signature generation logic
            // Implement AWS Signature Version 4
            return 'signature';
        }

        function displayProducts(data) {
            const container = document.getElementById('product-container');
            container.innerHTML = '';
            data.SearchResult.Items.forEach(item => {
                const productDiv = document.createElement('div');
                productDiv.className = 'product';
                productDiv.innerHTML = `
                    <img src="${item.Images.Primary.Medium.URL}" alt="${item.ItemInfo.Title.DisplayValue}">
                    <h3>${item.ItemInfo.Title.DisplayValue}</h3>
                    <p>${item.Offers.Listings[0].Price.DisplayAmount}</p>
                    <a href="${item.DetailPageURL}" target="_blank">View on Amazon</a>
                `;
                container.appendChild(productDiv);
            });
        }
    </script>
</body>
</html>
